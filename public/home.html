<!DOCTYPE html>
<html>
<head>
<title>Home! :D</title>
<style>
body {
  background-color: #9CC3D5FF;
}

h1 {
  color: white;
  text-align: center;
  font-family: monospace;
}

p {
  font-family: monospace;
  color:white;
  font-size: 15px;
  text-align:center;
}
</style>
<script>
  function message(){
     let post = document.getElementById("post").value;
     let tok = localStorage.getItem("token");
     let info = {
            message:post
          }
          fetch('/api/post-message', {
            method: 'post',
            headers: {
            'Authorization': 'bearer ' + tok,
            'Accept': 'application/json, text/plain, */*',
            'Content-Type': 'application/json'
             },
           body: JSON.stringify(info)
          }).then(res=>res.json()).then(res => {
            console.log(res);
  })
  }

  function readMessages(){
  let feed = document.getElementById("feed");
  let tok = localStorage.getItem("token");
  fetch('/api/read-message', {
            method: 'get',
            headers: {
            'Authorization': 'bearer ' + tok,
            'Accept': 'application/json, text/plain, */*',
            'Content-Type': 'application/json'
             }
          }).then(res=>res.json()).then(res => {
            console.log("lengthhhh" + res.length);
            for(let i = 0; i < res.length; i++){
             feed.innerHTML = res[i].author + res[i].message;
            }
  })
  }
  </script>
</head>

<body>
<h1>Home!:D</h1>
<p>Welcome to your home!</p>
<br>
<br>
<center>
<textarea id = "post" rows = "10" cols = "70">Quack, quack, quack... ᕕ( ᐛ )ᕗ</textarea>
<br>
<br>
<button type = "button" id = "post" onclick = "message()"> Quack!</button>
<br>
<br>
<button type = "button" id = "read" onclick = "readMessages()"> Quack!</button>
<br>
<br>
<div id = "feed"></div>
</center>
</body>
</html>